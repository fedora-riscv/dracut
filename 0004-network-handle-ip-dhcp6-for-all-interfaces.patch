From 2c7f7a337a8adeaa052274aa4b59bb25b90d1ea5 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Tue, 25 Mar 2014 15:39:56 +0100
Subject: [PATCH] network: handle "ip=dhcp6" for all interfaces

https://bugzilla.redhat.com/show_bug.cgi?id=1064365
---
 modules.d/40network/ifup.sh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/modules.d/40network/ifup.sh b/modules.d/40network/ifup.sh
index 51b0d52872..ede018832f 100755
--- a/modules.d/40network/ifup.sh
+++ b/modules.d/40network/ifup.sh
@@ -364,7 +364,12 @@ fi
 
 # no ip option directed at our interface?
 if [ ! -e /tmp/net.${netif}.up ]; then
-    do_dhcp -4
+    if getargs 'ip=dhcp6'; then
+        load_ipv6
+        do_dhcp -6
+    else
+        do_dhcp -4
+    fi
 fi
 
 exit 0
-- 
1.9.3

