From 744c65939be7aa791d5538c6733e05d390c8cd3a Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Tue, 25 Aug 2015 11:20:30 +0200
Subject: [PATCH] network/ifup.sh: save return value of ifup

(cherry picked from commit b4006781e8a59dc69a0dd3836fce137f08b23001)
---
 modules.d/40network/ifup.sh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/modules.d/40network/ifup.sh b/modules.d/40network/ifup.sh
index 381ff43..647c856 100755
--- a/modules.d/40network/ifup.sh
+++ b/modules.d/40network/ifup.sh
@@ -373,6 +373,7 @@ for p in $(getargs ip=); do
                 do_static ;;
         esac
     done
+    ret=$?
 
     > /tmp/net.${netif}.up
 
@@ -380,7 +381,7 @@ for p in $(getargs ip=); do
         dhcp|on|any|dhcp6)
             ;;
         *)
-            if [ $? -eq 0 ]; then
+            if [ $ret -eq 0 ]; then
                 setup_net $netif
                 source_hook initqueue/online $netif
                 if [ -z "$manualup" ]; then
