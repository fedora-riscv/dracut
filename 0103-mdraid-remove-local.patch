From 1f9c79629c390627942471ce6654aa88d40ba364 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Mon, 2 Aug 2010 11:35:25 +0200
Subject: [PATCH 103/133] mdraid: remove "local"

---
 modules.d/90mdraid/mdraid_start.sh |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/modules.d/90mdraid/mdraid_start.sh b/modules.d/90mdraid/mdraid_start.sh
index 8662671..0963658 100755
--- a/modules.d/90mdraid/mdraid_start.sh
+++ b/modules.d/90mdraid/mdraid_start.sh
@@ -10,12 +10,13 @@ mdadm -IRs 2>&1 | vinfo
 # which have had a container added
 for md in /dev/md[0-9]* /dev/md/*; do 
 	[ -b "$md" ] || continue
-	local udevinfo="$(udevadm info --query=env --name=$md)"
+	udevinfo="$(udevadm info --query=env --name=$md)"
 	strstr "$udevinfo" "MD_UUID=" && continue
 	strstr "$udevinfo" "MD_LEVEL=container" && continue
 	strstr "$udevinfo" "DEVTYPE=partition" && continue
 	mdadm -R "$md" 2>&1 | vinfo
 done
+unset udevinfo
 
 ln -s /sbin/mdraid-cleanup /pre-pivot/30-mdraid-cleanup.sh 2>/dev/null
 ln -s /sbin/mdraid-cleanup /pre-pivot/31-mdraid-cleanup.sh 2>/dev/null
-- 
1.7.3

