From c0a82e271e2730159f042ee7d7fc4aca2e08d28a Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 18 Feb 2011 09:37:11 +0100
Subject: [PATCH] i18n: default to vconsole.font.unicode=1

---
 modules.d/10i18n/parse-i18n.sh |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

diff --git a/modules.d/10i18n/parse-i18n.sh b/modules.d/10i18n/parse-i18n.sh
index 860b0ae..61280c0 100755
--- a/modules.d/10i18n/parse-i18n.sh
+++ b/modules.d/10i18n/parse-i18n.sh
@@ -5,9 +5,13 @@
 inst_key_val() {
     local _value
     local _file
+    local _default
+    _default=$1
+    shift
     _file=$1
     shift
     _value=$(getarg $@)
+    [ -z "${_value}" ] && _value=$_default
     if [ -n "${_value}" ]; then
         printf '%s="%s"\n' $1 ${_value} >> $_file
     fi
@@ -15,12 +19,12 @@ inst_key_val() {
     unset _value
 }
 
-inst_key_val /etc/vconsole.conf KEYMAP      vconsole.keymap      KEYTABLE
-inst_key_val /etc/vconsole.conf FONT        vconsole.font        SYSFONT 
-inst_key_val /etc/vconsole.conf FONT_MAP    vconsole.font.map    CONTRANS 
-inst_key_val /etc/vconsole.conf FONT_UNIMAP vconsole.font.unimap UNIMAP 
-inst_key_val /etc/vconsole.conf UNICODE     vconsole.font.unicode
-inst_key_val /etc/vconsole.conf EXT_KEYMAP  vconsole.keymap.ext
+inst_key_val /etc/vconsole.conf '' KEYMAP      vconsole.keymap      KEYTABLE
+inst_key_val /etc/vconsole.conf '' FONT        vconsole.font        SYSFONT 
+inst_key_val /etc/vconsole.conf '' FONT_MAP    vconsole.font.map    CONTRANS 
+inst_key_val /etc/vconsole.conf '' FONT_UNIMAP vconsole.font.unimap UNIMAP 
+inst_key_val /etc/vconsole.conf 1  UNICODE     vconsole.font.unicode
+inst_key_val /etc/vconsole.conf '' EXT_KEYMAP  vconsole.keymap.ext
 
 inst_key_val /etc/locale.conf   LANG   locale.LANG
 inst_key_val /etc/locale.conf   LC_ALL locale.LC_ALL
